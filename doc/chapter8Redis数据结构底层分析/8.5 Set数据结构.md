Redis用intset或hashtable存储set。

当存储的所有数据都是整数，并且元素数量不超过set-max-intset-entries时，Set会采用IntSet编码，以节省内存

如果不是整数类型，就用hashtable（数组+链表的存来储结构）。key就是元素的值，value为null。

![image-20240318204959571](https://gitee.com/dongguo4812_admin/image/raw/master/image/202403182110469.png)

![image-20240318205159397](https://gitee.com/dongguo4812_admin/image/raw/master/image/202403182110538.png)

# 源码

![image-20240318205221282](https://gitee.com/dongguo4812_admin/image/raw/master/image/202403182110831.png)

t_set.c

![image-20240318205107308](https://gitee.com/dongguo4812_admin/image/raw/master/image/202403182110466.png)

![image-20240318205228863](https://gitee.com/dongguo4812_admin/image/raw/master/image/202403182110892.png)