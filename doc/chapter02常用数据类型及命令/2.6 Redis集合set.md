# 介绍

Redis的Set是String类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据，集合对象的编码可以是intset或者hashtable.

Redis 中Set集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。

集合中最大的成员数为2^32-1 (4294967295,每个集合可存储40多亿个成员)

# 常见命令

## SADD

向set中添加一个或多个元素(去重)

```shell
127.0.0.1:6379> sadd set1 1 1 1 2 2 3 4 5
(integer) 5
```

## SMEMBERS

获取set中的所有元素

```shell
127.0.0.1:6379> smembers set1
1) "1"
2) "2"
3) "3"
4) "4"
5) "5"
```

## SISMEMBER

判断一个元素是否存在于set中，0不存在  1存在

```shell
127.0.0.1:6379> sismember set1 1
(integer) 1
127.0.0.1:6379> sismember set1 10
(integer) 0
```

## SREM

移除set中的指定元素

```shell
127.0.0.1:6379> srem set1 1
(integer) 1
127.0.0.1:6379> smembers set1
1) "2"
2) "3"
3) "4"
4) "5"
```

## SCARD

返回set中元素的个数

```shell
127.0.0.1:6379> scard set1
(integer) 4
```



## SRANDMEMBER

SRANDMEMBER key <n>:从集合中随机展现N个元素，元素不删除

```shell
127.0.0.1:6379> srandmember set1 2
1) "5"
2) "3"
127.0.0.1:6379> srandmember set1 2
1) "4"
2) "5"
```

## SPOP

SPOP key [n]  从集合中随机弹出n个元素，删除

```shell
127.0.0.1:6379> smembers set1
1) "2"
2) "3"
3) "4"
4) "5"
127.0.0.1:6379> spop set1 2
1) "2"
2) "3"
127.0.0.1:6379> smembers set1
1) "4"
2) "5"
```

## SMOVE

SMOVE key1 key2 ：将key1里已经存在的某个值 赋值给key2

```shell
127.0.0.1:6379> sadd set1 1 2 3 4 5
(integer) 5
127.0.0.1:6379> sadd set2 a b c d e
(integer) 5
127.0.0.1:6379> smove set1 set2 1
(integer) 1
127.0.0.1:6379> smembers set1
1) "2"
2) "3"
3) "4"
4) "5"
127.0.0.1:6379> smembers set2
1) "c"
2) "a"
3) "b"
4) "1"
5) "d"
6) "e"
```

# 集合运算命令

有两个集合，set1：a b c 1 2 ； set2:1 2 3 a x

```shell
127.0.0.1:6379> sadd set1 a b c 1 2
(integer) 5
127.0.0.1:6379> sadd set2 1 2 3 a x
(integer) 5
```

## SDIFF

SDIFF key1 key2:返回两个集合的差集(属于key1但不属于key2)

```shell
127.0.0.1:6379> sdiff set1 set2
1) "b"
2) "c"
```

## SDIFFSTORE

SDIFFSTORE destination key1 key2：将key1与key2相差的成员存储在  destination上

```shell
127.0.0.1:6379> sdiffstore set3 set1 set2
(integer) 2
127.0.0.1:6379> smembers set3
1) "b"
2) "c"
```

## SUNION

SUNION key1 key2:求key1 和 key2 的并集

```shell
127.0.0.1:6379> sunion set1 set2
1) "b"
2) "a"
3) "2"
4) "1"
5) "c"
6) "x"
7) "3"
```

## SUNIONSTORE

SUNIONSTORE destination key1 key2：将返回的并集存储在destination上

```shell
127.0.0.1:6379> sunionstore set4 set1 set2
(integer) 7
127.0.0.1:6379> smembers set4
1) "b"
2) "a"
3) "2"
4) "1"
5) "c"
6) "x"
7) "3"
```

## SINTER

SINTER key1 key2：求key1与key2的交集

```shell
127.0.0.1:6379> sinter set1 set2
1) "a"
2) "1"
3) "2"
```

# 应用场景

共同好友

