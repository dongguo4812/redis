# 介绍

Redis hash是一个string类型的field (字段)和value (值) 的映射表, hash特别适合用于存储对象。

Redis中每个hash可以存储2^32-1键值对(40多亿)

# 常见命令

## HSET

HSET key field value：添加或者修改hash类型key的field的值  

在新版本redis中，HSET 命令已经被更新为可以接受多个参数，从而也能够一次设置多个字段值

```shell
127.0.0.1:6379> hset user:001 id 1 name zhangsan age 18
(integer) 3
```

## HGET

HGET key field：获取一个hash类型key的field的值

```shell
127.0.0.1:6379> hset user:001 id 1 name zhangsan age 18
(integer) 3
127.0.0.1:6379> hget user:001 id
"1"
127.0.0.1:6379> hget user:001 name
"zhangsan"
```



## HMSET

批量添加多个hash类型key的field的值

HSET 或 HMSET 来设置多个字段值现在效果是一样的。

```shell
127.0.0.1:6379> hmset user:002 id 2 name lisi age 20
OK
```



## HMGET

批量获取多个hash类型key的field的值

```shell
127.0.0.1:6379> hmget user:001 id name age
1) "1"
2) "zhangsan"
3) "18"
```



## HGETALL

获取一个hash类型的key中的所有的field和value

```shell
127.0.0.1:6379> hgetall user:001
1) "id"
2) "1"
3) "name"
4) "zhangsan"
5) "age"
6) "18"
```

## HDEL

删除key中指定的field和value

```shell
127.0.0.1:6379> hgetall user:001
1) "id"
2) "1"
3) "name"
4) "zhangsan"
5) "age"
6) "18"
127.0.0.1:6379> hdel user:001 age
(integer) 1
127.0.0.1:6379> hgetall user:001
1) "id"
2) "1"
3) "name"
4) "zhangsan"
```



## HLEN

获取某个key内field全部数量

```shell
127.0.0.1:6379> hlen user:001
(integer) 2
```

## HEXISTS

查看哈希表在key中是否存在该filed

```shell
127.0.0.1:6379> hexists user:001 id
(integer) 1
127.0.0.1:6379> hexists user:001 age
(integer) 0
```

## HKEYS

获取一个hash类型的key中的所有的field

## HVALS

获取一个hash类型的value中的所有的value

## HINCRBY

获取一个hash类型的value中的所有的value

```shell
127.0.0.1:6379> hset user:001 id 1 name zhangsan age 18 score 90.0
(integer) 4
127.0.0.1:6379> hgetall user:001
1) "id"
2) "1"
3) "name"
4) "zhangsan"
5) "age"
6) "18"
7) "score"
8) "90.0"
127.0.0.1:6379> hincrby user:001 age 2
(integer) 20
127.0.0.1:6379> hget user:001 age
"20"
```



## HINCRYBYFLOAT

将哈希表中指定字段的值递增指定的浮点数

```shell
127.0.0.1:6379> hincrbyfloat user:001 score 2.5
"92.5"
127.0.0.1:6379> hget user:001 score
"92.5"
```

## HSETNX

添加一个hash类型的key的field值，前提是这个field不存在，否则不执行

```shell
127.0.0.1:6379> hgetall user:001
1) "id"
2) "1"
3) "name"
4) "zhangsan"
5) "age"
6) "20"
7) "score"
8) "92.5"
127.0.0.1:6379> hsetnx user:001 email 123@qq.com
(integer) 1
127.0.0.1:6379> hsetnx user:001 email 123@qq.com
(integer) 0
```

# 使用场景

购物车